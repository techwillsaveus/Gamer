#include <Gamer.h>
#include <GamerIR.h>
#include <SoftwareSerial.h>

#define NUMFRAMESSENDANIMATION 12
byte sendAnimation[NUMFRAMESSENDANIMATION][8] = {
		{B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B11111111},

		{B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B11111111,
		B01111110},

		{B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B11111111,
		B01111110,
		B00111100},

		{B00000000,
		B00000000,
		B00000000,
		B00000000,
		B11111111,
		B01111110,
		B00111100,
		B00011000},

		{B00000000,
		B00000000,
		B00000000,
		B11111111,
		B01111110,
		B00111100,
		B00011000,
		B00000000},

		{B00000000,
		B00000000,
		B11111111,
		B01111110,
		B00111100,
		B00011000,
		B00000000,
		B00000000},

		{B00000000,
		B11111111,
		B01111110,
		B00111100,
		B00011000,
		B00000000,
		B00000000,
		B00000000},

		{B11111111,
		B01111110,
		B00111100,
		B00011000,
		B00000000,
		B00000000,
		B00000000,
		B00000000},

		{B01111110,
		B00111100,
		B00011000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000},

		{B00111100,
		B00011000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000},

		{B00011000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000},

		{B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000}};

#define NUMFRAMESRECEIVEANIMATION 12
byte receiveAnimation[NUMFRAMESRECEIVEANIMATION][8] = {
		{B11111111,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000},

		{B01111110,
		B11111111,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000},

		{B00111100,
		B01111110,
		B11111111,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000},

		{B00011000,
		B00111100,
		B01111110,
		B11111111,
		B00000000,
		B00000000,
		B00000000,
		B00000000},

		{B00000000,
		B00011000,
		B00111100,
		B01111110,
		B11111111,
		B00000000,
		B00000000,
		B00000000},

		{B00000000,
		B00000000,
		B00011000,
		B00111100,
		B01111110,
		B11111111,
		B00000000,
		B00000000},

		{B00000000,
		B00000000,
		B00000000,
		B00011000,
		B00111100,
		B01111110,
		B11111111,
		B00000000},

		{B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00011000,
		B00111100,
		B01111110,
		B11111111},

		{B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00011000,
		B00111100,
		B01111110},

		{B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00011000,
		B00111100},

		{B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00011000},

		{B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000,
		B00000000}};



Gamer gamer;
GamerIR infrared;

void setup() {
  gamer.begin();
}

void loop() {
  // Say hi to the other Gamer when the START button is pressed.
  if(gamer.isPressed(START)) {
    for(int i=0; i<NUMFRAMESSENDANIMATION; i++) {
      gamer.printImage(sendAnimation[i]);
      delay(100);
    }
    infrared.send("hi");
  }
  // If hi is received, play receive  animation.
  if(infrared.receive() == "hi") {
    for(int i=0; i<NUMFRAMESRECEIVEANIMATION; i++) {
      gamer.printImage(receiveAnimation[i]);
      delay(100);
    }
  }
}
